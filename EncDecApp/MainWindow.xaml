<Window x:Class="EncDecApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Bcrypt - Secure File Encryption"
        Height="700" Width="1000"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E2E"
        FontFamily="Segoe UI"
        FontSize="14">

    <Window.Resources>
        <!-- Color Definitions -->
        <Color x:Key="PrimaryBackgroundColor">#1E1E2E</Color>
        <Color x:Key="SecondaryBackgroundColor">#2A2A3A</Color>
        <Color x:Key="CardBackgroundColor">#313244</Color>
        <Color x:Key="AccentBlueColor">#89B4FA</Color>
        <Color x:Key="AccentGreenColor">#A6E3A1</Color>
        <Color x:Key="AccentRedColor">#F38BA8</Color>
        <Color x:Key="AccentOrangeColor">#FAB387</Color>
        <Color x:Key="TextPrimaryColor">#CDD6F4</Color>
        <Color x:Key="TextSecondaryColor">#A6ADC8</Color>
        <Color x:Key="BorderColorColor">#45475A</Color>

        <!-- Brushes -->
        <SolidColorBrush x:Key="PrimaryBackground" Color="{StaticResource PrimaryBackgroundColor}"/>
        <SolidColorBrush x:Key="SecondaryBackground" Color="{StaticResource SecondaryBackgroundColor}"/>
        <SolidColorBrush x:Key="CardBackground" Color="{StaticResource CardBackgroundColor}"/>
        <SolidColorBrush x:Key="AccentBlue" Color="{StaticResource AccentBlueColor}"/>
        <SolidColorBrush x:Key="AccentGreen" Color="{StaticResource AccentGreenColor}"/>
        <SolidColorBrush x:Key="AccentRed" Color="{StaticResource AccentRedColor}"/>
        <SolidColorBrush x:Key="AccentOrange" Color="{StaticResource AccentOrangeColor}"/>
        <SolidColorBrush x:Key="TextPrimary" Color="{StaticResource TextPrimaryColor}"/>
        <SolidColorBrush x:Key="TextSecondary" Color="{StaticResource TextSecondaryColor}"/>
        <SolidColorBrush x:Key="BorderColor" Color="{StaticResource BorderColorColor}"/>

        <!-- Button Styles -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentBlue}"/>
            <Setter Property="Foreground" Value="#1E1E2E"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="#74C0FC"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="#5C7CFA"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="#45475A"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground">
                                    <Setter.Value>
                                        <SolidColorBrush Color="#6C7086"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource SecondaryBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <SolidColorBrush Color="#45475A"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <SolidColorBrush Color="#313244"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentGreen}"/>
        </Style>

        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="{StaticResource AccentRed}"/>
        </Style>

        <!-- Card Style -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Opacity="0.2" ShadowDepth="2" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource SecondaryBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Progress Ring Style -->
        <Style x:Key="ModernProgressRing" TargetType="ProgressBar">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Grid>
                            <Ellipse Stroke="{StaticResource BorderColor}" StrokeThickness="4" Width="40" Height="40"/>
                            <Ellipse Stroke="{StaticResource AccentBlue}" StrokeThickness="4" Width="40" Height="40"
                                     StrokeDashArray="25.12" StrokeDashOffset="25.12"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <RotateTransform x:Name="SpinTransform"/>
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger RoutedEvent="Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever">
                                                <DoubleAnimation Storyboard.TargetName="SpinTransform"
                                                                 Storyboard.TargetProperty="Angle"
                                                                 From="0" To="360" Duration="0:0:1"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Header -->
        <Border Background="{StaticResource SecondaryBackground}" Height="80" VerticalAlignment="Top">
            <Grid Margin="32,0">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Logo/Icon with Border and Icon -->
                    <Border Width="48" Height="48" Background="{StaticResource AccentBlue}" 
                            CornerRadius="24" Margin="0,0,16,0">
                        <TextBlock Text="🔐" FontSize="24" HorizontalAlignment="Center" 
                                   VerticalAlignment="Center" Foreground="White"/>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="Bcrypt" FontSize="24" FontWeight="Bold" Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Secure File Encryption" FontSize="12" Foreground="{StaticResource TextSecondary}"/>
                    </StackPanel>
                </StackPanel>

                <!-- Status Indicator -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Ellipse x:Name="StatusIndicator" Width="12" Height="12" Fill="{StaticResource AccentRed}" Margin="0,0,8,0"/>
                    <TextBlock x:Name="StatusText" Text="Ready" Foreground="{StaticResource TextSecondary}" FontSize="12"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Margin="0,80,0,0" VerticalScrollBarVisibility="Auto">
            <Grid Margin="32,24,32,32">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column - Fingerprint Section -->
                <Border Grid.Column="0" Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Text="Fingerprint Authentication" FontSize="18" FontWeight="SemiBold" 
                                   Foreground="{StaticResource TextPrimary}" Margin="0,0,0,24"/>

                        <!-- Fingerprint Scanner Area -->
                        <Border Background="{StaticResource SecondaryBackground}" CornerRadius="12" Padding="32" Margin="0,0,0,24">
                            <StackPanel HorizontalAlignment="Center">
                                <!-- Fingerprint Image/Icon Area -->
                                <Border x:Name="FingerprintArea" Width="200" Height="200" CornerRadius="12" 
                                        Background="{StaticResource PrimaryBackground}" Margin="0,0,0,16"
                                        BorderBrush="{StaticResource BorderColor}" BorderThickness="2">
                                    <Grid>
                                        <!-- Placeholder when no fingerprint -->
                                        <StackPanel x:Name="FingerprintPlaceholder" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <!-- Fingerprint Icon with Border -->
                                            <Border Width="64" Height="64" Background="{StaticResource AccentBlue}" 
                                                    CornerRadius="32" Opacity="0.3" Margin="0,0,0,12">
                                                <TextBlock Text="👆" FontSize="32" HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center" Foreground="White"/>
                                            </Border>
                                            <TextBlock Text="No fingerprint scanned" FontSize="12" Foreground="{StaticResource TextSecondary}" 
                                                       HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <!-- Fingerprint Image -->
                                        <Image x:Name="FingerprintImage" Stretch="Uniform" Visibility="Collapsed"/>

                                        <!-- Loading Indicator -->
                                        <StackPanel x:Name="LoadingIndicator" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
                                            <ProgressBar Style="{StaticResource ModernProgressRing}" Margin="0,0,0,16"/>
                                            <TextBlock x:Name="LoadingText" Text="Scanning..." FontSize="12" 
                                                       Foreground="{StaticResource TextSecondary}" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Scan Button -->
                                <Button x:Name="ScanButton" Content="Scan Fingerprint" Style="{StaticResource PrimaryButton}" 
                                        Width="180" Click="ScanButton_Click"/>
                            </StackPanel>
                        </Border>

                        <!-- Fingerprint Status -->
                        <Border Background="{StaticResource SecondaryBackground}" CornerRadius="8" Padding="16">
                            <StackPanel>
                                <TextBlock Text="Status" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse x:Name="FingerprintStatusIndicator" Width="8" Height="8" Fill="{StaticResource AccentRed}" Margin="0,0,8,0"/>
                                    <TextBlock x:Name="FingerprintStatusText" Text="Fingerprint not enrolled" 
                                               Foreground="{StaticResource TextSecondary}" FontSize="12"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Right Column - File Operations -->
                <Border Grid.Column="1" Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Text="File Operations" FontSize="18" FontWeight="SemiBold" 
                                   Foreground="{StaticResource TextPrimary}" Margin="0,0,0,24"/>

                        <!-- File Selection -->
                        <StackPanel Margin="0,0,0,24">
                            <TextBlock Text="Select File" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="FilePathTextBox" Grid.Column="0" Style="{StaticResource ModernTextBox}" 
                                         IsReadOnly="True" Text="No file selected..." Margin="0,0,8,0"/>
                                <Button x:Name="BrowseButton" Grid.Column="1" Content="Browse" Style="{StaticResource SecondaryButton}" 
                                        Click="BrowseButton_Click" Width="100"/>
                            </Grid>

                            <!-- File Info -->
                            <StackPanel x:Name="FileInfoPanel" Margin="0,8,0,0" Visibility="Collapsed">
                                <TextBlock x:Name="FileInfoText" FontSize="12" Foreground="{StaticResource TextSecondary}"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Action Buttons -->
                        <StackPanel>
                            <TextBlock Text="Actions" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}" Margin="0,0,0,16"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Button x:Name="EncryptButton" Grid.Column="0" Content="🔒 Encrypt" 
                                        Style="{StaticResource SuccessButton}" Margin="0,0,8,0" 
                                        Click="EncryptButton_Click" IsEnabled="False"/>

                                <Button x:Name="DecryptButton" Grid.Column="1" Content="🔓 Decrypt" 
                                        Style="{StaticResource PrimaryButton}" Margin="8,0,0,0" 
                                        Click="DecryptButton_Click" IsEnabled="False"/>
                            </Grid>
                        </StackPanel>

                        <!-- Progress Section -->
                        <Border x:Name="ProgressSection" Background="{StaticResource SecondaryBackground}" 
                                CornerRadius="8" Padding="16" Margin="0,24,0,0" Visibility="Collapsed">
                            <StackPanel>
                                <Grid Margin="0,0,0,12">
                                    <TextBlock x:Name="ProgressTitle" Text="Processing..." FontWeight="SemiBold" 
                                               Foreground="{StaticResource TextPrimary}"/>
                                    <TextBlock x:Name="ProgressPercent" Text="0%" FontSize="12" 
                                               Foreground="{StaticResource TextSecondary}" HorizontalAlignment="Right"/>
                                </Grid>
                                <ProgressBar x:Name="ProgressBar" Height="4" Background="{StaticResource BorderColor}" 
                                             Foreground="{StaticResource AccentBlue}" Value="0"/>
                                <TextBlock x:Name="ProgressText" Text="Initializing..." FontSize="11" 
                                           Foreground="{StaticResource TextSecondary}" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Quick Tips -->
                        <Border Background="{StaticResource SecondaryBackground}" CornerRadius="8" Padding="16" Margin="0,24,0,0">
                            <StackPanel>
                                <TextBlock Text="💡 Quick Tips" FontWeight="SemiBold" Foreground="{StaticResource AccentBlue}" Margin="0,0,0,8"/>
                                <TextBlock Text="• Enroll your fingerprint first before encrypting files" FontSize="11" 
                                           Foreground="{StaticResource TextSecondary}" Margin="0,0,0,4"/>
                                <TextBlock Text="• Use the same finger for encryption and decryption" FontSize="11" 
                                           Foreground="{StaticResource TextSecondary}" Margin="0,0,0,4"/>
                                <TextBlock Text="• Keep your sensor clean for best results" FontSize="11" 
                                           Foreground="{StaticResource TextSecondary}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>
        </ScrollViewer>

        <!-- Notification Overlay -->
        <Grid x:Name="NotificationOverlay" Background="#80000000" Visibility="Collapsed">
            <Border Background="{StaticResource CardBackground}" CornerRadius="12" Padding="32" 
                    MaxWidth="400" HorizontalAlignment="Center" VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock x:Name="NotificationTitle" FontSize="18" FontWeight="SemiBold" 
                               Foreground="{StaticResource TextPrimary}" Margin="0,0,0,12" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="NotificationMessage" FontSize="14" 
                               Foreground="{StaticResource TextSecondary}" TextWrapping="Wrap" 
                               HorizontalAlignment="Center" Margin="0,0,0,24"/>
                    <Button x:Name="NotificationCloseButton" Content="OK" Style="{StaticResource PrimaryButton}" 
                            Width="100" HorizontalAlignment="Center" Click="NotificationCloseButton_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>